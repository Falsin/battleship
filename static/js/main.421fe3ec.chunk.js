(this.webpackJsonpbattle_ship=this.webpackJsonpbattle_ship||[]).push([[0],{42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r,a,i,c=t(0),s=t.n(c),o=t(21),d=t.n(o),l=t(10),u=t(2),j=t(3),b=t(4),h=t(1),f=b.a.footer(r||(r=Object(j.a)(["\n  padding: 2vmin;\n  background: darkblue;\n\n  & a {\n    color: white;\n    text-decoration: none;\n  }\n"])));function p(){return Object(h.jsx)(f,{children:Object(h.jsx)("a",{href:"https://github.com/Falsin",children:"Made by Falsin"})})}var x=b.a.header(a||(a=Object(j.a)(["\n  background: red;\n  padding: 2vmin;\n  margin: 0;\n"]))),g=b.a.h1(i||(i=Object(j.a)(["\n  padding: 0;\n  margin: 0;\n  text-align: center;\n"])));function v(e){return Object(h.jsx)(x,{children:Object(h.jsx)(g,{children:"Battleship"})})}var O,m=function(){var e;return function(){return{name:e,setName:function(n){e=n,this.name=e}}}}()(),y=b.a.div(O||(O=Object(j.a)(["\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  & * {\n    padding: 0;\n    margin: 1vmin;\n  }\n\n  & input {\n    padding: 1vmin;\n    border: solid gray 1px;\n    outline: none;\n  }\n\n  a {\n    display: block;\n    border: solid gray 1px;\n    padding: 1vmin;\n    text-decoration: none;\n    color: black;\n  }\n"])));function k(e){return Object(h.jsxs)(y,{children:[Object(h.jsx)("h3",{children:"Enter player name:"}),Object(h.jsx)("input",{placeholder:"Combat",onBlur:function(e){return m.setName(e.target.value)}}),Object(h.jsx)(l.b,{to:"/gamePage",children:"Start game"})]})}var C=t(7),P=(t(40),t(19));var S=function(e){var n=function(e){var n={isDamage:!1};return new Array(e.length).fill().map((function(){return Object.assign({},n)}))}(e);return{shipPart:n,hit:function(e){n[e].isDamage=!0},isSunk:function(){return n.filter((function(e){return e.isDamage})).length===n.length},isPlaced:!1}};var w,A=function(){var e=[],n=[{name:"carrier",length:5},{name:"battleship",length:4},{name:"Cruiser",length:3},{name:"submarine",length:3},{name:"destroyer",length:2}].map((function(e){return Object(P.a)(Object(P.a)({},e),S(e))}));return{placeShips:function(t){this.hoveredCells=[],n.find((function(e){return!e.isPlaced})).shipPart.forEach((function(n,r){n.coord=t+r,e.push(t+r)}))},checkCellAssing:function(n){return!e.includes(n)},newShipsArray:n,addCellsIntoHoveredCells:function(e,n){var t=this;this.hoveredCells=[],e.shipPart.forEach((function(e,r){t.hoveredCells.push(n+r)}))},hoveredCells:[],selectedCells:e,isReady:!1}},B=t(17),E=b.a.div(w||(w=Object(j.a)(["\n  background: ",";\n  border: solid white 1px;\n"])),(function(e){return e.error.key?"red":e.status.key||e.hover.key?"gray":"rgb(66, 66, 255)"}));function R(e){var n=Object(c.useState)(!1),t=Object(C.a)(n,2),r=t[0],a=t[1],i=Object(c.useState)(!1),s=Object(C.a)(i,2),o=s[0],d=s[1],l=Object(c.useState)(!1),u=Object(C.a)(l,2),j=u[0],b=u[1];return Object(c.useEffect)((function(){var n=e.state.board.newShipsArray,t=e.state.board;if(t.hoveredCells.includes(e.index))t.selectedCells.includes(e.index)?d(!0):b(!0);else{j&&b(!1),d(!1);var r,i=Object(B.a)(n);try{for(i.s();!(r=i.n()).done;){var c=r.value;if(c.isPlaced)c.shipPart.find((function(n){return n.coord===e.index}))&&a(!0)}}catch(s){i.e(s)}finally{i.f()}}})),Object(h.jsx)(E,{onClick:function(){return e.state.board.isReady?null:function(){var n=Object.assign({},e.state.board),t=n.newShipsArray.find((function(e){return!e.isPlaced}));t&&n.checkCellAssing(e.index)&&e.index%10+t.length<=10&&(n.placeShips(e.index),t.isPlaced=!0,n.newShipsArray.find((function(e){return!e.isPlaced}))||(n.isReady=!0),e.state.setBoard(n))}()},onMouseEnter:function(){return e.state.board.isReady?null:function(){var n=Object.assign({},e.state.board),t=n.newShipsArray.find((function(e){return!e.isPlaced}));e.index%10+t.length<=10&&(n.addCellsIntoHoveredCells(t,e.index),e.state.setBoard(n))}()},status:{key:r},error:{key:o},hover:{key:j},children:e.index})}function H(e,n){if(n.state.board.hoveredCells.includes(n.index)||e.state.board.hoveredCells.includes(n.index))return!1;if(e.state.board.isReady!==n.state.board.isReady)return!1;var t,r=n.state.board.newShipsArray,a=Object(B.a)(r);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.isPlaced)if(i.shipPart.find((function(e){return e.coord===n.index})))return!1}}catch(c){a.e(c)}finally{a.f()}return!0}var M,D,I=s.a.memo(R,H),F=(t(41),b.a.div(M||(M=Object(j.a)(["\n  display: flex;\n  align-items: center;\n\n  div {\n    display: grid;\n    grid-template-columns: repeat(10, 4vmin);\n    grid-template-rows: repeat(10, 4vmin); \n  }\n\n  button {\n    margin-right: 2vmin;\n  }\n"]))));function J(e){var n,t=Object(c.useState)(A()),r=Object(C.a)(t,2),a=r[0],i=r[1];return console.log(e),Object(h.jsxs)(F,{children:[e.isHuman?Object(h.jsx)("button",{children:"axis: X"}):null,Object(h.jsx)("div",{children:(n=100,new Array(n).fill().map((function(e,n){return Object(h.jsx)(I,{index:n,state:{board:a,setBoard:i}},n)})))})]})}var N,_=b.a.div(D||(D=Object(j.a)(["\n  #gameBoards {\n    display: flex;\n    justify-content: space-evenly;\n  }\n"])));function X(){return Object(h.jsx)(_,{children:Object(h.jsxs)("div",{id:"gameBoards",children:[Object(h.jsx)(J,{player:m,isHuman:!0}),Object(h.jsx)(J,{player:{makeMove:function(){}}})]})})}function q(e){return"registration"===e.page?Object(h.jsx)(k,{}):Object(h.jsx)(X,{})}var z=b.a.section(N||(N=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n"])));function G(e){return Object(h.jsxs)(z,{children:[Object(h.jsx)(v,{}),Object(h.jsx)(q,{page:"registration"}),Object(h.jsx)(p,{})]})}var K=function(e){return Object(h.jsxs)("section",{children:[Object(h.jsx)(v,{}),Object(h.jsx)(q,{}),Object(h.jsx)(p,{})]})};var L=function(){return Object(h.jsx)(l.a,{children:Object(h.jsxs)(u.c,{children:[Object(h.jsx)(u.a,{exact:!0,path:"/",component:G}),Object(h.jsx)(u.a,{exact:!0,path:"/gamePage",component:K})]})})};t(42);d.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(L,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.421fe3ec.chunk.js.map