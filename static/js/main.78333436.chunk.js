(this.webpackJsonpbattle_ship=this.webpackJsonpbattle_ship||[]).push([[0],{44:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var r,a,i,s=t(0),c=t.n(s),o=t(22),l=t.n(o),d=t(12),u=t(2),b=t(3),h=t(4),j=t(1),f=h.a.footer(r||(r=Object(b.a)(["\n  padding: 2vmin;\n  background: darkblue;\n\n  & a {\n    color: white;\n    text-decoration: none;\n  }\n"])));function v(){return Object(j.jsx)(f,{children:Object(j.jsx)("a",{href:"https://github.com/Falsin",children:"Made by Falsin"})})}var O=h.a.header(a||(a=Object(b.a)(["\n  background: red;\n  padding: 2vmin;\n  margin: 0;\n"]))),p=h.a.h1(i||(i=Object(b.a)(["\n  padding: 0;\n  margin: 0;\n  text-align: center;\n"])));function g(e){return Object(j.jsx)(O,{children:Object(j.jsx)(p,{children:"Battleship"})})}var x=t(27),m=t(20);var y=function(e){var n=function(e){var n={isDamage:!1};return new Array(e.length).fill().map((function(){return Object.assign({},n)}))}(e);return{shipPart:n,hit:function(e){n[e].isDamage=!0},isSunk:function(){return n.filter((function(e){return e.isDamage})).length===n.length},isPlaced:!1}};var C=function(){var e=[{name:"carrier",length:5},{name:"battleship",length:4},{name:"Cruiser",length:3},{name:"submarine",length:3},{name:"destroyer",length:2}].map((function(e){return Object(m.a)(Object(m.a)({},e),y(e))}));return{placeShips:function(n){var t=this,r=this.selectedCells.find((function(e){return e===n})),a=e.find((function(e){return!e.isPlaced}));if(void 0===r){var i,s=a.shipPart.map((function(e,n){return e.coord=t.hoveredCells[n]}));(i=this.selectedCells).push.apply(i,Object(x.a)(s)),a.isPlaced=!0}this.hoveredCells=[]},newShipsArray:e,addCellsIntoHoveredCells:function(e,n){var t=this;this.hoveredCells=[],"horizontal"===this.orientation&&n%10+e.length<=10?e.shipPart.forEach((function(e,r){t.hoveredCells.push(n+r)})):"vertical"===this.orientation&&n+(10*e.length-10)<=99&&e.shipPart.forEach((function(e,r){t.hoveredCells.push(n+10*r)}))},hoveredCells:[],selectedCells:[],isReady:!1,changeOrientation:function(){return this.orientation="vertical"===this.orientation?"horizontal":"vertical"},orientation:"horizontal"}};function k(){var e=C();return Object.assign(Object.create(e),!1)}k(),function(){var e=k();Object.assign(Object.create(e))}();var P,S=function(){var e;return function(){return{name:e,setName:function(n){e=n,this.name=e}}}}()(),w=h.a.div(P||(P=Object(b.a)(["\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  & * {\n    padding: 0;\n    margin: 1vmin;\n  }\n\n  & input {\n    padding: 1vmin;\n    border: solid gray 1px;\n    outline: none;\n  }\n\n  a {\n    display: block;\n    border: solid gray 1px;\n    padding: 1vmin;\n    text-decoration: none;\n    color: black;\n  }\n"])));function B(e){return Object(j.jsxs)(w,{children:[Object(j.jsx)("h3",{children:"Enter player name:"}),Object(j.jsx)("input",{placeholder:"Combat",onBlur:function(e){return S.setName(e.target.value)}}),Object(j.jsx)(d.b,{to:"/gamePage",children:"Start game"})]})}var H,A=t(8),E=(t(42),t(18)),R=h.a.div(H||(H=Object(b.a)(["\n  background: ",";\n  border: solid white 1px;\n"])),(function(e){return e.error.key?"red":e.status.key||e.hover.key?"gray":"rgb(66, 66, 255)"}));function z(e){var n=Object(s.useState)(!1),t=Object(A.a)(n,2),r=t[0],a=t[1],i=Object(s.useState)(!1),c=Object(A.a)(i,2),o=c[0],l=c[1],d=Object(s.useState)(!1),u=Object(A.a)(d,2),b=u[0],h=u[1];return Object(s.useEffect)((function(){var n=e.state.board.newShipsArray,t=e.state.board;if(t.hoveredCells.includes(e.index))t.selectedCells.includes(e.index)?l(!0):h(!0);else{b&&h(!1),l(!1);var r,i=Object(E.a)(n);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(s.isPlaced)s.shipPart.find((function(n){return n.coord===e.index}))&&a(!0)}}catch(c){i.e(c)}finally{i.f()}}})),Object(j.jsx)(R,{onClick:function(){return e.state.board.isReady||!e.isHuman?null:function(){var n=Object.assign({},e.state.board);n.placeShips(e.index),n.newShipsArray.find((function(e){return!e.isPlaced}))||(n.isReady=!0),e.state.setBoard(n)}()},onMouseEnter:function(){return e.state.board.isReady||!e.isHuman?null:function(){var n=Object.assign({},e.state.board),t=n.newShipsArray.find((function(e){return!e.isPlaced}));n.addCellsIntoHoveredCells(t,e.index),e.state.setBoard(n)}()},status:{key:r},error:{key:o},hover:{key:b},children:e.index})}function D(e,n){if(n.state.board.hoveredCells.includes(n.index)||e.state.board.hoveredCells.includes(n.index))return!1;if(e.state.board.isReady!==n.state.board.isReady)return!1;if(e.state.board.orientation!==n.state.board.orientation)return!1;var t,r=n.state.board.newShipsArray,a=Object(E.a)(r);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.isPlaced)if(i.shipPart.find((function(e){return e.coord===n.index})))return!1}}catch(s){a.e(s)}finally{a.f()}return!0}var I,M,F=c.a.memo(z,D),J=(t(43),h.a.div(I||(I=Object(b.a)(["\n  display: flex;\n  align-items: center;\n\n  div {\n    display: grid;\n    grid-template-columns: repeat(10, 4vmin);\n    grid-template-rows: repeat(10, 4vmin); \n  }\n\n  button {\n    margin-right: 2vmin;\n  }\n"]))));function N(e){var n,t=Object(s.useState)(C()),r=Object(A.a)(t,2),a=r[0],i=r[1];return Object(j.jsxs)(J,{children:[e.isHuman?Object(j.jsxs)("button",{onClick:function(){var e=Object.assign({},a);e.changeOrientation(),i(e)},children:["axis: ","horizontal"===a.orientation?"X":"Y"]}):null,Object(j.jsx)("div",{children:(n=100,new Array(n).fill().map((function(n,t){return Object(j.jsx)(F,{index:t,state:{board:a,setBoard:i},isHuman:e.isHuman},t)})))})]})}var _,X=h.a.div(M||(M=Object(b.a)(["\n  #gameBoards {\n    display: flex;\n    justify-content: space-evenly;\n  }\n"])));function Y(){return Object(j.jsx)(X,{children:Object(j.jsxs)("div",{id:"gameBoards",children:[Object(j.jsx)(N,{isHuman:!0}),Object(j.jsx)(N,{})]})})}function q(e){return"registration"===e.page?Object(j.jsx)(B,{}):Object(j.jsx)(Y,{})}var G=h.a.section(_||(_=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n"])));function K(e){return Object(j.jsxs)(G,{children:[Object(j.jsx)(g,{}),Object(j.jsx)(q,{page:"registration"}),Object(j.jsx)(v,{})]})}var L=function(e){return Object(j.jsxs)("section",{children:[Object(j.jsx)(g,{}),Object(j.jsx)(q,{}),Object(j.jsx)(v,{})]})};var Q=function(){return Object(j.jsx)(d.a,{children:Object(j.jsxs)(u.c,{children:[Object(j.jsx)(u.a,{exact:!0,path:"/",component:K}),Object(j.jsx)(u.a,{exact:!0,path:"/gamePage",component:L})]})})};t(44);l.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(Q,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.78333436.chunk.js.map