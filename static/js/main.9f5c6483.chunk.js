(this.webpackJsonpbattle_ship=this.webpackJsonpbattle_ship||[]).push([[0],{43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var r,i,a,s=t(0),l=t.n(s),c=t(22),o=t.n(c),u=t(13),d=t(2),h=t(3),f=t(4),j=t(1),b=f.a.footer(r||(r=Object(h.a)(["\n  padding: 2vmin;\n  background: darkblue;\n\n  & a {\n    color: white;\n    text-decoration: none;\n  }\n"])));function v(){return Object(j.jsx)(b,{children:Object(j.jsx)("a",{href:"https://github.com/Falsin",children:"Made by Falsin"})})}var p=f.a.header(i||(i=Object(h.a)(["\n  background: red;\n  padding: 2vmin;\n  margin: 0;\n"]))),y=f.a.h1(a||(a=Object(h.a)(["\n  padding: 0;\n  margin: 0;\n  text-align: center;\n"])));function O(e){return Object(j.jsx)(p,{children:Object(j.jsx)(y,{children:"Battleship"})})}var g=t(27),m=t(20);var x=function(e){var n=function(e){var n={isDamage:!1};return new Array(e.length).fill().map((function(){return Object.assign({},n)}))}(e);return{shipPart:n,hit:function(e){n[e].isDamage=!0},isSunk:function(){return n.filter((function(e){return e.isDamage})).length===n.length},isPlaced:!1}};var C=function(){return{placeShips:function(e){var n=this,t=this.selectedCells.find((function(n){return n===e})),r=this.newShipsArray.find((function(e){return!e.isPlaced}));if(void 0===t){var i,a=r.shipPart.map((function(e,t){return e.coord=n.hoveredCells.cellsArray[t]}));(i=this.selectedCells).push.apply(i,Object(g.a)(a)),r.isPlaced=!0}this.hoveredCells.cellsArray=[]},newShipsArray:[{name:"carrier",length:5},{name:"battleship",length:4},{name:"Cruiser",length:3},{name:"submarine",length:3},{name:"destroyer",length:2}].map((function(e){return Object(m.a)(Object(m.a)({},e),x(e))})),addCellsIntoHoveredCells:function(e,n){if("horizontal"===this.orientation)if(n%10+e.length<=10)this.selectedCells.includes(n)?(console.log("work"),this.hoveredCells.cellsArray=e.shipPart.map((function(e,t){return n+t})),this.hoveredCells.isValid=!1):(this.hoveredCells.cellsArray=e.shipPart.map((function(e,t){return n+t})),this.hoveredCells.isValid=!0);else{this.hoveredCells.cellsArray=[];for(var t=0;n%10+t<10;)this.hoveredCells.cellsArray.push(n+t++);this.hoveredCells.isValid=!1}else if("vertical"===this.orientation)if(n+(10*e.length-10)<=99)this.selectedCells.includes(n)?(this.hoveredCells.cellsArray=e.shipPart.map((function(e,t){return n+10*t})),this.hoveredCells.isValid=!1):(this.hoveredCells.cellsArray=e.shipPart.map((function(e,t){return n+10*t})),this.hoveredCells.isValid=!0);else{this.hoveredCells.cellsArray=[];for(var r=0;n+r<=99;)this.hoveredCells.cellsArray.push(n+r),r+=10;this.hoveredCells.isValid=!1}},hoveredCells:{cellsArray:[],isValid:!0},selectedCells:[],isReady:!1,changeOrientation:function(){return this.orientation="vertical"===this.orientation?"horizontal":"vertical"},orientation:"horizontal"}};function A(){var e=C();return Object.assign(Object.create(e),{isReady:!1})}var P,k=function(){var e=null;return function(){var n=e,t=A();return Object.assign(Object.create(t),{name:n,setName:function(n){e=n,this.name=n}})}}(),w=f.a.div(P||(P=Object(h.a)(["\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  & * {\n    padding: 0;\n    margin: 1vmin;\n  }\n\n  & input {\n    padding: 1vmin;\n    border: solid gray 1px;\n    outline: none;\n  }\n\n  a {\n    display: block;\n    border: solid gray 1px;\n    padding: 1vmin;\n    text-decoration: none;\n    color: black;\n  }\n"])));function S(e){return Object(j.jsxs)(w,{children:[Object(j.jsx)("h3",{children:"Enter player name:"}),Object(j.jsx)("input",{placeholder:"Combat",onBlur:function(e){k().setName(e.target.value)}}),Object(j.jsx)(u.b,{to:"/gamePage",children:"Start game"})]})}var H=t(7),V=(t(42),t(12));var R,B=function e(n){var t;if(Array.isArray(n)){t=[];var r,i=Object(V.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;t.push(e(a))}}catch(c){i.e(c)}finally{i.f()}}else if("object"===typeof n&&n){var s=e(Object.getPrototypeOf(n));for(var l in t=Object.create(s),n)Object.hasOwnProperty.call(n,l)&&(t[l]=e(n[l]))}else t=n;return t},z=f.a.div(R||(R=Object(h.a)(["\n  background: ",";\n  border: solid white 1px;\n"])),(function(e){return e.error.key?"red":e.status.key||e.hover.key?"gray":"rgb(66, 66, 255)"}));function E(e){var n=Object(s.useState)(!1),t=Object(H.a)(n,2),r=t[0],i=t[1],a=Object(s.useState)(!1),l=Object(H.a)(a,2),c=l[0],o=l[1],u=Object(s.useState)(!1),d=Object(H.a)(u,2),h=d[0],f=d[1],b=e.state.player.newShipsArray,v=e.state.player;return Object(s.useEffect)((function(){if(v.hoveredCells.cellsArray.includes(e.index))v.hoveredCells.isValid?(f(!0),o(!1)):o(!0);else{f(!1),o(!1);var n,t=Object(V.a)(b);try{for(t.s();!(n=t.n()).done;){var r=n.value;if(r.isPlaced)r.shipPart.find((function(n){return n.coord===e.index}))&&i(!0)}}catch(a){t.e(a)}finally{t.f()}}})),Object(j.jsx)(z,{onClick:function(){return v.isReady||!e.isHuman?null:function(){var n=B(e.state.player);n.placeShips(e.index),n.newShipsArray.find((function(e){return!e.isPlaced}))||(n.isReady=!0),e.state.func(n)}()},onMouseEnter:function(){return v.isReady||!e.isHuman?null:function(){var n=B(e.state.player),t=n.newShipsArray.find((function(e){return!e.isPlaced}));n.addCellsIntoHoveredCells(t,e.index),console.log(n),e.state.func(n)}()},status:{key:r},error:{key:c},hover:{key:h},children:e.index})}function D(e,n){var t=n.state.player,r=e.state.player;if(r.hoveredCells.cellsArray.includes(n.index)||t.hoveredCells.cellsArray.includes(n.index))return!1;if(r.isReady!==t.isReady)return!1;if(r.orientation!==t.orientation)return!1;if(I(r.selectedCells)!==I(t.selectedCells))return!1;var i,a=r.newShipsArray,s=Object(V.a)(a);try{for(s.s();!(i=s.n()).done;){var l=i.value;if(l.isPlaced)if(l.shipPart.find((function(e){return e.coord===n.index})))return!1}}catch(c){s.e(c)}finally{s.f()}return!0}function I(e){return e.reduce((function(e,n){return e+n}),0)}var M,F,J=l.a.memo(E,D),N=f.a.div(M||(M=Object(h.a)(["\n  display: flex;\n  align-items: center;\n\n  div {\n    display: grid;\n    grid-template-columns: repeat(10, 4vmin);\n    grid-template-rows: repeat(10, 4vmin); \n  }\n\n  button {\n    margin-right: 2vmin;\n  }\n"])));function _(e){var n,t={player:e.player,func:e.func};return Object(j.jsxs)(N,{children:[e.isHuman?Object(j.jsxs)("button",{onClick:function(){var n=B(e.player);n.changeOrientation(),e.func(n)},children:["axis: ","horizontal"===e.player.orientation?"X":"Y"]}):null,Object(j.jsx)("div",{children:(n=100,new Array(n).fill().map((function(n,r){return Object(j.jsx)(J,{index:r,state:t,isHuman:e.isHuman},r)})))})]})}var X,Y=f.a.div(F||(F=Object(h.a)(["\n  #gameBoards {\n    display: flex;\n    justify-content: space-evenly;\n  }\n"])));function q(){var e=Object(s.useState)(k()),n=Object(H.a)(e,2),t=n[0],r=n[1],i=Object(s.useState)(function(){var e=A();return Object.assign(Object.create(e),{name:"robot"})}()),a=Object(H.a)(i,2),l=a[0],c=a[1];return Object(j.jsx)(Y,{children:Object(j.jsxs)("div",{id:"gameBoards",children:[Object(j.jsx)(_,{player:t,func:r,isHuman:!0}),Object(j.jsx)(_,{player:l,func:c})]})})}function G(e){return"registration"===e.page?Object(j.jsx)(S,{}):Object(j.jsx)(q,{})}var K=f.a.section(X||(X=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n"])));function L(e){return Object(j.jsxs)(K,{children:[Object(j.jsx)(O,{}),Object(j.jsx)(G,{page:"registration"}),Object(j.jsx)(v,{})]})}var Q=function(e){return Object(j.jsxs)("section",{children:[Object(j.jsx)(O,{}),Object(j.jsx)(G,{}),Object(j.jsx)(v,{})]})};var T=function(){return Object(j.jsx)(u.a,{children:Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{exact:!0,path:"/",component:L}),Object(j.jsx)(d.a,{exact:!0,path:"/gamePage",component:Q})]})})};t(43);o.a.render(Object(j.jsx)(l.a.StrictMode,{children:Object(j.jsx)(T,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.9f5c6483.chunk.js.map